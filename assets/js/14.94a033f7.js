(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{292:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"dependencies-vs-devdependencies"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dependencies-vs-devdependencies"}},[s._v("#")]),s._v(" "),t("code",[s._v("dependencies")]),s._v(" vs "),t("code",[s._v("devDependencies")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("dependencies")]),s._v("：项目运行所依赖的模块\n（通过"),t("code",[s._v("npm install xxx --save")]),s._v("安装的模块将会写入其中）")]),s._v(" "),t("li",[t("code",[s._v("devDependencies")]),s._v("：项目开发所依赖的模块\n（通过"),t("code",[s._v("npm install xxx --save-dev")]),s._v("安装的模块将会写入其中）")])]),s._v(" "),t("h2",{attrs:{id:"scripts脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#scripts脚本"}},[s._v("#")]),s._v(" "),t("code",[s._v("scripts")]),s._v("脚本")]),s._v(" "),t("p",[s._v("在"),t("code",[s._v("package.json")]),s._v("中"),t("code",[s._v("scripts")]),s._v("里定义的脚本命令可以通过"),t("code",[s._v("npm run xxx")]),s._v("调用。")]),s._v(" "),t("p",[s._v("每次执行"),t("code",[s._v("npm run xxx")]),s._v("，就会自动创建一个 "),t("code",[s._v("Shell")]),s._v("，并在"),t("code",[s._v("Shell")]),s._v("里执行脚本命令。因此只要是"),t("code",[s._v("Shell")]),s._v("可以执行的命令，都可以写入脚本里。")]),s._v(" "),t("p",[s._v("另外，执行"),t("code",[s._v("npm run xxx")]),s._v("时，会自动将"),t("code",[s._v("node_modules/.bin")]),s._v("子目录加入"),t("code",[s._v("PATH")]),s._v("环境变量中，执行结束后再将"),t("code",[s._v("PATH")]),s._v("恢复原样。\n这也意味着"),t("code",[s._v("node_modules/.bin")]),s._v("中的所有脚本都可以直接用脚本名直接调用而不必加上路径。\n比如：")]),s._v(" "),t("p",[s._v("例如：假设你只是在本地开发环境装了"),t("code",[s._v("typescript")]),s._v("依赖，那么你只需要执行"),t("code",[s._v("tsc")]),s._v("就可以了不用加上路径（"),t("code",[s._v("./node_modules/.bin/tsc")]),s._v("）")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 编译项目")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tsc"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开启自动编译：监听文件变化并自动编译")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build:dev"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tsc --watch"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("可以通过在终端中调用这些脚本命令")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等价于在终端中调用 tsc")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等价于在终端中调用 tsc --watch")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build:dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"查看项目中所有的脚本命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看项目中所有的脚本命令"}},[s._v("#")]),s._v(" 查看项目中所有的脚本命令")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"一个脚本命令执行多个任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一个脚本命令执行多个任务"}},[s._v("#")]),s._v(" 一个脚本命令执行多个任务")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("并发执行：使用"),t("code",[s._v("&")]),s._v("符号连接需要并发执行的命令，任务将会同时执行，没有执行先后顺序")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ts-node file.ts 和 node file.js 同时执行，没有先后顺序")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ts-node file.ts & node file.js"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("继发执行：使用"),t("code",[s._v("&&")]),s._v("符号连接需要继发执行的命令，命令将按照先后顺序执行。前一个任务完成后，下一个任务才会执行")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这个脚本在`tsc file.ts`命令执行完成后，才会继续执行`node file.js`")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" tsc file.ts && node file.js"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"钩子-pre和post"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#钩子-pre和post"}},[s._v("#")]),s._v(" 钩子 "),t("code",[s._v("pre")]),s._v("和"),t("code",[s._v("post")])]),s._v(" "),t("p",[s._v("前置任务钩子格式："),t("code",[s._v("prexxx")]),s._v("\n后置置任务钩子格式："),t("code",[s._v("postxxx")]),s._v("\n当执行"),t("code",[s._v("npm run xxx")]),s._v("时，"),t("code",[s._v("npm")]),s._v("会自动检测钩子，并按照"),t("code",[s._v("prexxx")]),s._v("->"),t("code",[s._v("xxx")]),s._v("->"),t("code",[s._v("postxxx")]),s._v("的顺序执行")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"prebuild"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rimraf ./dist"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" tsc a.ts"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"postbuild"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('" node a.js"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("当执行"),t("code",[s._v("npm run build")]),s._v("时：会优先执行"),t("code",[s._v("prebuild")]),s._v("，然后执行"),t("code",[s._v("build")]),s._v("，最后执行"),t("code",[s._v("postbuild")])]),s._v(" "),t("p",[s._v("等价于："),t("code",[s._v("npm run prebuild && npm run build && npm run postbuild")])]),s._v(" "),t("h3",{attrs:{id:"scripts-snippts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#scripts-snippts"}},[s._v("#")]),s._v(" scripts snippts")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打开浏览器")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"open:dev"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"opener http://localhost:9090"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 搭建本地http服务器")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"serve"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http-server -p 9090 dist/"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除目录")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"clean"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rimraf dist/*"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 编译ts文件")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"buildTs"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tsc"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("以上脚本根据具体逻辑安装相关依赖")])]),s._v(" "),t("h2",{attrs:{id:"bin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bin"}},[s._v("#")]),s._v(" "),t("code",[s._v("bin")])]),s._v(" "),t("p",[s._v("配置命令，并映射到可执行文件的路径.")]),s._v(" "),t("p",[s._v("比如你想定义一个命令"),t("code",[s._v("leaf")]),s._v("，运行命令的时候执行"),t("code",[s._v("bin/leaf.js")]),s._v("，则可以这样配置：")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bin"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 格式：[命令名称]: [命令路径]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"leaf"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bin/leaf.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("如果想使用"),t("code",[s._v("leaf")]),s._v("这个命令，则需要挂载到全局：\n"),t("code",[s._v("npm install . -g")]),s._v("\n或者\n"),t("code",[s._v("npm link")]),s._v("（"),t("code",[s._v("npm unlink 可以解绑命令")]),s._v("）")]),s._v(" "),t("p",[s._v("此时就可以使用"),t("code",[s._v("leaf")]),s._v("命令了")]),s._v(" "),t("p",[t("code",[s._v("vue")]),s._v("命令就是这么实现的")]),s._v(" "),t("p",[s._v("如果想实现自己的脚手架（CLI），就会用到它。我们后续将会详细介绍。")])])}),[],!1,null,null,null);t.default=e.exports}}]);